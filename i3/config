# Скопируйте и вставьте ВСЁ в nano (Ctrl+Shift+V или правой кнопкой)
# i3 config file (v4)
# Этот файл использует Win (Super) как модификатор!

# Клавиша-модификатор (Win/Super = Mod4, Alt = Mod1)
set $mod Mod4

# Цвета для оформления (можно поменять)
set $bg-color #2f343f
set $inactive-bg-color #2f343f
set $text-color #f3f4f5
set $inactive-text-color #676e7d
set $urgent-bg-color #e53935

# Шрифт
font pango:DejaVu Sans Mono 10

# Запуск терминала
bindsym $mod+Return exec xterm -fs 16

# Запуск dmenu (меню программ)
bindsym $mod+d exec dmenu_run

# Убить текущее окно
bindsym $mod+Shift+q kill

# Изменить фокус окон
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Переместить фокус между рабочими столами
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Режим вкладок (Tabbed)
bindsym $mod+w layout tabbed

# Режим стопки (Stacked)
bindsym $mod+s layout stacked

# Вернуться к обычному плиточному режиму (Splitting)
bindsym $mod+e layout toggle split


# Переместить окно
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right

# Разделить окно по горизонтали
bindsym $mod+semicolon split h

# Разделить окно по вертикали
bindsym $mod+v split v

# Полноэкранный режим
bindsym $mod+f fullscreen toggle

# Плавающий режим
bindsym $mod+Shift+space floating toggle

# Изменить фокус между плавающими/плиточными окнами
bindsym $mod+space focus mode_toggle

# Изменить фокус на родительский контейнер
bindsym $mod+a focus parent

bindsym $mod+Shift+m mark mychrome
# Win+m — пометить текущее окно меткой "mychrome"

bindsym $mod+m [con_mark="mychrome"] focus
# Win+Shift+m — найти окно с меткой "mychrome" и сфокусировать его


# Рабочие столы:
# Переключение на рабочий стол N
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Переместить окно на рабочий стол N
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Режим изменения размера
mode "resize" {
    # Изменить размер
    bindsym j resize shrink width 10 px or 10 ppt
    bindsym k resize grow height 10 px or 10 ppt
    bindsym l resize shrink height 10 px or 10 ppt
    bindsym semicolon resize grow width 10 px or 10 ppt
    
    # Выйти из режима
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+r mode "resize"

# Перезагрузить конфиг
bindsym $mod+Shift+c reload

# Перезапустить i3
bindsym $mod+Shift+r restart

# Выход из i3 (с подтверждением)
set $exit_command "i3-nagbar -t warning -m 'Вы хотите выйти из i3?' -b 'Да' 'i3-msg exit'"
bindsym $mod+Shift+e exec $exit_command

# Блокировка экрана (установите i3lock)
# bindsym $mod+x exec i3lock

# Запуск программ
# bindsym $mod+p exec firefox
# bindsym $mod+e exec thunar

# Автозапуск программ при старте i3
exec --no-startup-id xsetroot -solid "#2f343f"
#exec --no-startup-id i3status
exec_always --no-startup-id $HOME/.config/polybar/launch.sh
# Окна без заголовков
for_window [class="^.*"] border pixel 1

# Цвета оформления
#                          border   background   text     indicator
client.focused            #4c7899   #285577      #ffffff   #2e9ef4
client.focused_inactive   #333333   #5f676a      #ffffff   #484e50
client.unfocused          #333333   #222222      #888888   #292d2e
client.urgent             #2f343a   #900000      #ffffff   #900000
client.placeholder        #000000   #0c0c0c      #ffffff   #000000

# Статус бар
#bar {
#    position top
#    status_command i3status
#    colors {
#        background #222222
#        statusline #ffffff
#        focused_workspace  #4c7899 #285577 #ffffff
#        active_workspace   #333333 #5f676a #ffffff
#        inactive_workspace #333333 #222222 #888888
#        urgent_workspace   #2f343a #900000 #ffffff
#    }
#}

exec_always --no-startup-id copyq
exec --no-startup-id pulseaudio --start
exec --no-startup-id xrdb ~/.Xresources

# Переместить текущий workspace на монитор справа
bindsym $mod+Ctrl+Right move workspace to output right

# Переместить текущий workspace на монитор слева
bindsym $mod+Ctrl+Left move workspace to output left

bindsym Print exec --no-startup-id flameshot gui

exec_always --no-startup-id flatpak run org.kde.CrowTranslate

# GoldenDict-ng: не встраивать в тайлинг (иначе будет "соседнее окно")
for_window [instance="^goldendict$" class="^GoldenDict-ng$"] floating enable, move position center, resize set 900 500

# (опционально) попытаться не забирать фокус
no_focus [instance="^goldendict$" class="^GoldenDict-ng$"]


bindcode --release $mod+Shift+40 exec --no-startup-id bash -lc '$HOME/.local/bin/deepl_ru_hotkey'
bindsym $mod+Shift+Escape exec --no-startup-id dunstctl close-all
exec_always --no-startup-id dunst

